// =========================
// overrides.scss
// Quita naranja y usa rojo institucional en todo el tema
// =========================

// ---- Marca
$brand-primary: #C8102E !default; // Rojo institucional
$brand-primary-rgb: 200, 16, 46;
$brand-primary-contrast: #FFFFFF;
$brand-primary-shade: darken($brand-primary, 10%);
$brand-primary-tint:  lighten($brand-primary, 10%);

// Igualamos warning (naranja por defecto) a la marca
$brand-warning: $brand-primary !default;
$brand-warning-rgb: $brand-primary-rgb;
$brand-warning-contrast: #FFFFFF;
$brand-warning-shade: darken($brand-warning, 10%);
$brand-warning-tint:  lighten($brand-warning, 10%);

// ---- Variables globales (claro)
:root,
:root .ios,
:root .md {
  --ion-color-primary: #{$brand-primary};
  --ion-color-primary-rgb: #{$brand-primary-rgb};
  --ion-color-primary-contrast: #{$brand-primary-contrast};
  --ion-color-primary-contrast-rgb: 255,255,255;
  --ion-color-primary-shade: #{$brand-primary-shade};
  --ion-color-primary-tint: #{$brand-primary-tint};

  --ion-color-warning: #{$brand-warning};
  --ion-color-warning-rgb: #{$brand-warning-rgb};
  --ion-color-warning-contrast: #{$brand-warning-contrast};
  --ion-color-warning-contrast-rgb: 255,255,255;
  --ion-color-warning-shade: #{$brand-warning-shade};
  --ion-color-warning-tint: #{$brand-warning-tint};

  --core-color-primary: var(--ion-color-primary);
  --core-color-primary-rgb: var(--ion-color-primary-rgb);
}

// ---- Variables globales (oscuro)
[data-theme="dark"],
body.dark,
html.dark {
  --ion-color-primary: #{$brand-primary};
  --ion-color-primary-rgb: #{$brand-primary-rgb};
  --ion-color-primary-contrast: #{$brand-primary-contrast};
  --ion-color-primary-contrast-rgb: 255,255,255;
  --ion-color-primary-shade: #{$brand-primary-shade};
  --ion-color-primary-tint: #{$brand-primary-tint};

  --ion-color-warning: #{$brand-warning};
  --ion-color-warning-rgb: #{$brand-warning-rgb};
  --ion-color-warning-contrast: #{$brand-warning-contrast};
  --ion-color-warning-contrast-rgb: 255,255,255;
  --ion-color-warning-shade: #{$brand-warning-shade};
  --ion-color-warning-tint: #{$brand-warning-tint};

  --core-color-primary: var(--ion-color-primary);
  --core-color-primary-rgb: var(--ion-color-primary-rgb);
}

/* Asegurar utilidades Ionic */
.ion-color-primary,
.ion-color-warning {
  --ion-color-base: var(--ion-color-primary) !important;
  --ion-color-base-rgb: var(--ion-color-primary-rgb) !important;
  --ion-color-contrast: var(--ion-color-primary-contrast) !important;
  --ion-color-contrast-rgb: var(--ion-color-primary-contrast-rgb) !important;
  --ion-color-shade: var(--ion-color-primary-shade) !important;
  --ion-color-tint: var(--ion-color-primary-tint) !important;
}

/* =========================
   FIX 1: Toolbar buttons deben seguir siendo 'clear'
   (vuelve a mostrarse la lupa/íconos sin fondo circular)
   ========================= */
ion-toolbar ion-buttons ion-button,
ion-header   ion-buttons ion-button,
ion-toolbar  ion-button[fill="clear"],
ion-header   ion-button[fill="clear"] {
  --background: transparent !important;
  --background-hover: transparent !important;
  --background-activated: transparent !important;
  --color: inherit !important; /* usa color del toolbar */
}

/* Mantén estilo sólido SOLO cuando el botón tiene color explícito */
ion-button.ion-color-primary,
ion-button[color="primary"],
button.ion-color-primary {
  --background: var(--ion-color-primary) !important;
  --background-hover: var(--ion-color-primary-shade) !important;
  --background-activated: var(--ion-color-primary-shade) !important;
  --background-focused: var(--ion-color-primary-tint) !important;
  --color: #fff !important;
}
ion-button.ion-color-warning,
ion-button[color="warning"],
button.ion-color-warning {
  --background: var(--ion-color-primary) !important;
  --color: #fff !important;
}

/* =========================
   FIX 2: Subrayados tabs/segment/tabbar en rojo
   ========================= */

/* Tabs superiores (ion-segment) */
ion-segment {
  --indicator-color: var(--ion-color-primary) !important;
  --indicator-color-checked: var(--ion-color-primary) !important;
}
ion-segment::part(indicator) {
  background: var(--ion-color-primary) !important;
}
.segment-button-indicator .indicator-background {
  background-color: var(--ion-color-primary) !important;
}
ion-segment-button {
  --color-checked: var(--ion-color-primary) !important;
}

/* Tab bar inferior */
ion-tab-bar {
  --color-selected: var(--ion-color-primary) !important;
  --indicator-color: var(--ion-color-primary) !important; /* subrayado de la barra */
}
ion-tab-bar::part(highlight) {
  background: var(--ion-color-primary) !important;
}
ion-tab-button {
  --color-selected: var(--ion-color-primary) !important;
}

/* Badges de la barra inferior */
ion-tab-bar ion-badge,
ion-tab-button ion-badge {
  background: var(--ion-color-primary) !important;
  color: #fff !important;
}

/* =========================
   Resto de componentes (se mantienen)
   ========================= */
ion-badge,
ion-badge.ion-color-warning {
  --background: var(--ion-color-primary) !important;
  --color: #fff !important;
}
ion-toggle {
  --handle-background-checked: var(--ion-color-primary) !important;
  --background-checked: rgba(var(--ion-color-primary-rgb), 0.35) !important;
}
ion-checkbox {
  --checkbox-background-checked: var(--ion-color-primary) !important;
  --checkbox-border-color-checked: var(--ion-color-primary) !important;
  --checkmark-color: #fff !important;
}
ion-radio { --color-checked: var(--ion-color-primary) !important; }
ion-range {
  --bar-background-active: var(--ion-color-primary) !important;
  --bar-background-active-opacity: 1 !important;
  --knob-background: var(--ion-color-primary) !important;
}
ion-progress-bar { --progress-background: var(--ion-color-primary) !important; }
ion-refresher-content { --spinner-color: var(--ion-color-primary) !important; }

/* Enlaces y detalle de items */
a, .link { color: var(--ion-color-primary) !important; }
ion-item { --detail-icon-color: var(--ion-color-primary) !important; }

/* Skeleton shimmer */
.skeleton-text::after {
  background-image: linear-gradient(
    90deg,
    rgba(var(--ion-color-primary-rgb), 0.06) 0,
    rgba(var(--ion-color-primary-rgb), 0.12) 20%,
    rgba(var(--ion-color-primary-rgb), 0.06) 40%
  ) !important;
}
